[2023-03-13T21:52:29.921+0000] {taskinstance.py:1083} INFO - Dependencies all met for <TaskInstance: AUTOMATISATION.Chargement_des_données_in_ELK scheduled__2023-03-13T00:02:27+00:00 [queued]>
[2023-03-13T21:52:29.933+0000] {taskinstance.py:1083} INFO - Dependencies all met for <TaskInstance: AUTOMATISATION.Chargement_des_données_in_ELK scheduled__2023-03-13T00:02:27+00:00 [queued]>
[2023-03-13T21:52:29.933+0000] {taskinstance.py:1279} INFO - 
--------------------------------------------------------------------------------
[2023-03-13T21:52:29.933+0000] {taskinstance.py:1280} INFO - Starting attempt 1 of 4
[2023-03-13T21:52:29.933+0000] {taskinstance.py:1281} INFO - 
--------------------------------------------------------------------------------
[2023-03-13T21:52:29.963+0000] {taskinstance.py:1300} INFO - Executing <Task(BashOperator): Chargement_des_données_in_ELK> on 2023-03-13 00:02:27+00:00
[2023-03-13T21:52:29.966+0000] {standard_task_runner.py:55} INFO - Started process 65300 to run task
[2023-03-13T21:52:29.971+0000] {standard_task_runner.py:82} INFO - Running: ['airflow', 'tasks', 'run', 'AUTOMATISATION', 'Chargement_des_données_in_ELK', 'scheduled__2023-03-13T00:02:27+00:00', '--job-id', '377', '--raw', '--subdir', 'DAGS_FOLDER/main.py', '--cfg-path', '/tmp/tmpxa9cy9ry']
[2023-03-13T21:52:29.972+0000] {standard_task_runner.py:83} INFO - Job 377: Subtask Chargement_des_données_in_ELK
[2023-03-13T21:52:30.047+0000] {task_command.py:388} INFO - Running <TaskInstance: AUTOMATISATION.Chargement_des_données_in_ELK scheduled__2023-03-13T00:02:27+00:00 [running]> on host dev
[2023-03-13T21:52:30.134+0000] {taskinstance.py:1507} INFO - Exporting the following env vars:
AIRFLOW_CTX_DAG_OWNER=airflow
AIRFLOW_CTX_DAG_ID=AUTOMATISATION
AIRFLOW_CTX_TASK_ID=Chargement_des_données_in_ELK
AIRFLOW_CTX_EXECUTION_DATE=2023-03-13T00:02:27+00:00
AIRFLOW_CTX_TRY_NUMBER=1
AIRFLOW_CTX_DAG_RUN_ID=scheduled__2023-03-13T00:02:27+00:00
[2023-03-13T21:52:30.136+0000] {subprocess.py:63} INFO - Tmp dir root location: 
 /tmp
[2023-03-13T21:52:30.136+0000] {subprocess.py:75} INFO - Running command: ['/usr/bin/bash', '-c', 'echo dev | sudo -S /usr/share/logstash/bin/logstash --path.settings=/etc/logstash/ -f /etc/logstash/conf.d/data.conf']
[2023-03-13T21:52:30.144+0000] {subprocess.py:86} INFO - Output:
[2023-03-13T21:52:30.234+0000] {subprocess.py:93} INFO - [sudo] Mot de passe de dev : Using bundled JDK: /usr/share/logstash/jdk
[2023-03-13T21:52:30.487+0000] {subprocess.py:93} INFO - OpenJDK 64-Bit Server VM warning: Option UseConcMarkSweepGC was deprecated in version 9.0 and will likely be removed in a future release.
[2023-03-13T21:52:52.899+0000] {subprocess.py:93} INFO - Sending Logstash logs to /var/log/logstash which is now configured via log4j2.properties
[2023-03-13T21:52:53.028+0000] {subprocess.py:93} INFO - [2023-03-13T21:52:53,025][INFO ][logstash.runner          ] Log4j configuration path used is: /etc/logstash/log4j2.properties
[2023-03-13T21:52:53.041+0000] {subprocess.py:93} INFO - [2023-03-13T21:52:53,040][INFO ][logstash.runner          ] Starting Logstash {"logstash.version"=>"7.15.2", "jruby.version"=>"jruby 9.2.19.0 (2.5.8) 2021-06-15 55810c552b OpenJDK 64-Bit Server VM 11.0.12+7 on 11.0.12+7 +indy +jit [linux-x86_64]"}
[2023-03-13T21:52:53.636+0000] {subprocess.py:93} INFO - [2023-03-13T21:52:53,636][WARN ][logstash.config.source.multilocal] Ignoring the 'pipelines.yml' file because modules or command line options are specified
[2023-03-13T21:52:55.756+0000] {subprocess.py:93} INFO - [2023-03-13T21:52:55,754][INFO ][logstash.agent           ] Successfully started Logstash API endpoint {:port=>9600}
[2023-03-13T21:52:56.767+0000] {subprocess.py:93} INFO - [2023-03-13T21:52:56,759][INFO ][org.reflections.Reflections] Reflections took 158 ms to scan 1 urls, producing 120 keys and 417 values
[2023-03-13T21:52:58.281+0000] {subprocess.py:93} INFO - [2023-03-13T21:52:58,280][INFO ][logstash.outputs.elasticsearch][main] New Elasticsearch output {:class=>"LogStash::Outputs::ElasticSearch", :hosts=>["//localhost:9200"]}
[2023-03-13T21:52:58.698+0000] {subprocess.py:93} INFO - [2023-03-13T21:52:58,696][INFO ][logstash.outputs.elasticsearch][main] Elasticsearch pool URLs updated {:changes=>{:removed=>[], :added=>[http://localhost:9200/]}}
[2023-03-13T21:52:58.905+0000] {subprocess.py:93} INFO - [2023-03-13T21:52:58,904][WARN ][logstash.outputs.elasticsearch][main] Restored connection to ES instance {:url=>"http://localhost:9200/"}
[2023-03-13T21:52:58.965+0000] {subprocess.py:93} INFO - [2023-03-13T21:52:58,964][INFO ][logstash.outputs.elasticsearch][main] Elasticsearch version determined (7.15.2) {:es_version=>7}
[2023-03-13T21:52:58.968+0000] {subprocess.py:93} INFO - [2023-03-13T21:52:58,967][WARN ][logstash.outputs.elasticsearch][main] Detected a 6.x and above cluster: the `type` event field won't be used to determine the document _type {:es_version=>7}
[2023-03-13T21:52:59.234+0000] {subprocess.py:93} INFO - [2023-03-13T21:52:59,228][INFO ][logstash.outputs.elasticsearch][main] Using a default mapping template {:es_version=>7, :ecs_compatibility=>:disabled}
[2023-03-13T21:52:59.278+0000] {subprocess.py:93} INFO - [2023-03-13T21:52:59,277][INFO ][logstash.javapipeline    ][main] Starting pipeline {:pipeline_id=>"main", "pipeline.workers"=>8, "pipeline.batch.size"=>125, "pipeline.batch.delay"=>50, "pipeline.max_inflight"=>1000, "pipeline.sources"=>["/etc/logstash/conf.d/data.conf"], :thread=>"#<Thread:0x54367067 run>"}
[2023-03-13T21:53:00.488+0000] {subprocess.py:93} INFO - [2023-03-13T21:53:00,487][INFO ][logstash.javapipeline    ][main] Pipeline Java execution initialization time {"seconds"=>1.2}
[2023-03-13T21:53:00.600+0000] {subprocess.py:93} INFO - [2023-03-13T21:53:00,600][INFO ][logstash.javapipeline    ][main] Pipeline started {"pipeline.id"=>"main"}
[2023-03-13T21:53:00.707+0000] {subprocess.py:93} INFO - [2023-03-13T21:53:00,706][INFO ][logstash.agent           ] Pipelines running {:count=>1, :running_pipelines=>[:main], :non_running_pipelines=>[]}
[2023-03-13T21:53:02.104+0000] {subprocess.py:93} INFO - [2023-03-13T21:53:02,103][INFO ][logstash.inputs.jdbc     ][main][afa454a497099ce3438919c7cfc7ae10a3b3980082608321cda443e0b5f70dbd] (0.024012s) SELECT CAST(current_setting('server_version_num') AS integer) AS v
[2023-03-13T21:53:02.344+0000] {subprocess.py:93} INFO - [2023-03-13T21:53:02,344][INFO ][logstash.inputs.jdbc     ][main][afa454a497099ce3438919c7cfc7ae10a3b3980082608321cda443e0b5f70dbd] (0.084070s) SELECT count(*) AS "count" FROM (SELECT * FROM customers) AS "t1" LIMIT 1
[2023-03-13T21:53:02.978+0000] {subprocess.py:93} INFO - [2023-03-13T21:53:02,978][INFO ][logstash.inputs.jdbc     ][main][afa454a497099ce3438919c7cfc7ae10a3b3980082608321cda443e0b5f70dbd] (0.606782s) SELECT * FROM (SELECT * FROM customers) AS "t1" LIMIT 50000 OFFSET 0
[2023-03-13T21:53:11.581+0000] {subprocess.py:93} INFO - [2023-03-13T21:53:11,580][INFO ][logstash.inputs.jdbc     ][main][afa454a497099ce3438919c7cfc7ae10a3b3980082608321cda443e0b5f70dbd] (0.314313s) SELECT * FROM (SELECT * FROM customers) AS "t1" LIMIT 50000 OFFSET 50000
[2023-03-13T21:53:18.034+0000] {subprocess.py:93} INFO - [2023-03-13T21:53:18,034][INFO ][logstash.inputs.jdbc     ][main][afa454a497099ce3438919c7cfc7ae10a3b3980082608321cda443e0b5f70dbd] (0.338281s) SELECT * FROM (SELECT * FROM customers) AS "t1" LIMIT 50000 OFFSET 100000
[2023-03-13T21:53:22.895+0000] {subprocess.py:93} INFO - [2023-03-13T21:53:22,895][INFO ][logstash.inputs.jdbc     ][main][afa454a497099ce3438919c7cfc7ae10a3b3980082608321cda443e0b5f70dbd] (0.338871s) SELECT * FROM (SELECT * FROM customers) AS "t1" LIMIT 50000 OFFSET 150000
[2023-03-13T21:53:26.068+0000] {subprocess.py:93} INFO - [2023-03-13T21:53:26,068][INFO ][logstash.inputs.jdbc     ][main][afa454a497099ce3438919c7cfc7ae10a3b3980082608321cda443e0b5f70dbd] (0.131613s) SELECT * FROM (SELECT * FROM customers) AS "t1" LIMIT 50000 OFFSET 200000
[2023-03-13T21:53:30.475+0000] {subprocess.py:93} INFO - [2023-03-13T21:53:30,475][INFO ][logstash.inputs.jdbc     ][main][afa454a497099ce3438919c7cfc7ae10a3b3980082608321cda443e0b5f70dbd] (0.111323s) SELECT * FROM (SELECT * FROM customers) AS "t1" LIMIT 50000 OFFSET 250000
[2023-03-13T21:53:33.440+0000] {subprocess.py:93} INFO - [2023-03-13T21:53:33,440][INFO ][logstash.inputs.jdbc     ][main][afa454a497099ce3438919c7cfc7ae10a3b3980082608321cda443e0b5f70dbd] (0.130905s) SELECT * FROM (SELECT * FROM customers) AS "t1" LIMIT 50000 OFFSET 300000
[2023-03-13T21:53:36.128+0000] {subprocess.py:93} INFO - [2023-03-13T21:53:36,128][INFO ][logstash.inputs.jdbc     ][main][afa454a497099ce3438919c7cfc7ae10a3b3980082608321cda443e0b5f70dbd] (0.121416s) SELECT * FROM (SELECT * FROM customers) AS "t1" LIMIT 50000 OFFSET 350000
[2023-03-13T21:53:38.915+0000] {subprocess.py:93} INFO - [2023-03-13T21:53:38,915][INFO ][logstash.inputs.jdbc     ][main][afa454a497099ce3438919c7cfc7ae10a3b3980082608321cda443e0b5f70dbd] (0.124957s) SELECT * FROM (SELECT * FROM customers) AS "t1" LIMIT 50000 OFFSET 400000
[2023-03-13T21:53:41.553+0000] {subprocess.py:93} INFO - [2023-03-13T21:53:41,552][INFO ][logstash.inputs.jdbc     ][main][afa454a497099ce3438919c7cfc7ae10a3b3980082608321cda443e0b5f70dbd] (0.117084s) SELECT * FROM (SELECT * FROM customers) AS "t1" LIMIT 50000 OFFSET 450000
[2023-03-13T21:53:44.337+0000] {subprocess.py:93} INFO - [2023-03-13T21:53:44,336][INFO ][logstash.inputs.jdbc     ][main][afa454a497099ce3438919c7cfc7ae10a3b3980082608321cda443e0b5f70dbd] (0.146118s) SELECT * FROM (SELECT * FROM customers) AS "t1" LIMIT 50000 OFFSET 500000
[2023-03-13T21:53:49.581+0000] {subprocess.py:93} INFO - [2023-03-13T21:53:49,581][INFO ][logstash.inputs.jdbc     ][main][afa454a497099ce3438919c7cfc7ae10a3b3980082608321cda443e0b5f70dbd] (0.135568s) SELECT * FROM (SELECT * FROM customers) AS "t1" LIMIT 50000 OFFSET 550000
[2023-03-13T21:53:52.391+0000] {subprocess.py:93} INFO - [2023-03-13T21:53:52,390][INFO ][logstash.inputs.jdbc     ][main][afa454a497099ce3438919c7cfc7ae10a3b3980082608321cda443e0b5f70dbd] (0.255137s) SELECT * FROM (SELECT * FROM customers) AS "t1" LIMIT 50000 OFFSET 600000
[2023-03-13T21:53:56.140+0000] {subprocess.py:93} INFO - [2023-03-13T21:53:56,139][INFO ][logstash.inputs.jdbc     ][main][afa454a497099ce3438919c7cfc7ae10a3b3980082608321cda443e0b5f70dbd] (0.134459s) SELECT * FROM (SELECT * FROM customers) AS "t1" LIMIT 50000 OFFSET 650000
[2023-03-13T21:54:00.531+0000] {subprocess.py:93} INFO - [2023-03-13T21:54:00,531][INFO ][logstash.inputs.jdbc     ][main][afa454a497099ce3438919c7cfc7ae10a3b3980082608321cda443e0b5f70dbd] (0.173149s) SELECT * FROM (SELECT * FROM customers) AS "t1" LIMIT 50000 OFFSET 700000
[2023-03-13T21:54:03.048+0000] {subprocess.py:93} INFO - [2023-03-13T21:54:03,047][INFO ][logstash.inputs.jdbc     ][main][afa454a497099ce3438919c7cfc7ae10a3b3980082608321cda443e0b5f70dbd] (0.135491s) SELECT * FROM (SELECT * FROM customers) AS "t1" LIMIT 50000 OFFSET 750000
[2023-03-13T21:54:06.153+0000] {subprocess.py:93} INFO - [2023-03-13T21:54:06,152][INFO ][logstash.inputs.jdbc     ][main][afa454a497099ce3438919c7cfc7ae10a3b3980082608321cda443e0b5f70dbd] (0.184029s) SELECT * FROM (SELECT * FROM customers) AS "t1" LIMIT 50000 OFFSET 800000
[2023-03-13T21:54:08.708+0000] {subprocess.py:93} INFO - [2023-03-13T21:54:08,708][INFO ][logstash.inputs.jdbc     ][main][afa454a497099ce3438919c7cfc7ae10a3b3980082608321cda443e0b5f70dbd] (0.160042s) SELECT * FROM (SELECT * FROM customers) AS "t1" LIMIT 50000 OFFSET 850000
[2023-03-13T21:54:11.192+0000] {subprocess.py:93} INFO - [2023-03-13T21:54:11,191][INFO ][logstash.inputs.jdbc     ][main][afa454a497099ce3438919c7cfc7ae10a3b3980082608321cda443e0b5f70dbd] (0.163946s) SELECT * FROM (SELECT * FROM customers) AS "t1" LIMIT 50000 OFFSET 900000
[2023-03-13T21:54:14.092+0000] {subprocess.py:93} INFO - [2023-03-13T21:54:14,092][INFO ][logstash.inputs.jdbc     ][main][afa454a497099ce3438919c7cfc7ae10a3b3980082608321cda443e0b5f70dbd] (0.171204s) SELECT * FROM (SELECT * FROM customers) AS "t1" LIMIT 50000 OFFSET 950000
[2023-03-13T21:54:16.626+0000] {subprocess.py:93} INFO - [2023-03-13T21:54:16,626][INFO ][logstash.inputs.jdbc     ][main][afa454a497099ce3438919c7cfc7ae10a3b3980082608321cda443e0b5f70dbd] (0.158554s) SELECT * FROM (SELECT * FROM customers) AS "t1" LIMIT 50000 OFFSET 1000000
[2023-03-13T21:54:19.386+0000] {subprocess.py:93} INFO - [2023-03-13T21:54:19,385][INFO ][logstash.inputs.jdbc     ][main][afa454a497099ce3438919c7cfc7ae10a3b3980082608321cda443e0b5f70dbd] (0.167548s) SELECT * FROM (SELECT * FROM customers) AS "t1" LIMIT 50000 OFFSET 1050000
[2023-03-13T21:54:22.579+0000] {subprocess.py:93} INFO - [2023-03-13T21:54:22,578][INFO ][logstash.inputs.jdbc     ][main][afa454a497099ce3438919c7cfc7ae10a3b3980082608321cda443e0b5f70dbd] (0.170763s) SELECT * FROM (SELECT * FROM customers) AS "t1" LIMIT 50000 OFFSET 1100000
[2023-03-13T21:54:25.271+0000] {subprocess.py:93} INFO - [2023-03-13T21:54:25,271][INFO ][logstash.inputs.jdbc     ][main][afa454a497099ce3438919c7cfc7ae10a3b3980082608321cda443e0b5f70dbd] (0.166363s) SELECT * FROM (SELECT * FROM customers) AS "t1" LIMIT 50000 OFFSET 1150000
[2023-03-13T21:54:28.191+0000] {subprocess.py:93} INFO - [2023-03-13T21:54:28,190][INFO ][logstash.javapipeline    ][main] Pipeline terminated {"pipeline.id"=>"main"}
[2023-03-13T21:54:28.600+0000] {subprocess.py:93} INFO - [2023-03-13T21:54:28,599][INFO ][logstash.pipelinesregistry] Removed pipeline from registry successfully {:pipeline_id=>:main}
[2023-03-13T21:54:28.658+0000] {subprocess.py:93} INFO - [2023-03-13T21:54:28,657][INFO ][logstash.runner          ] Logstash shut down.
[2023-03-13T21:54:28.893+0000] {subprocess.py:97} INFO - Command exited with return code 0
[2023-03-13T21:54:28.933+0000] {taskinstance.py:1318} INFO - Marking task as SUCCESS. dag_id=AUTOMATISATION, task_id=Chargement_des_données_in_ELK, execution_date=20230313T000227, start_date=20230313T215229, end_date=20230313T215428
[2023-03-13T21:54:28.968+0000] {local_task_job.py:208} INFO - Task exited with return code 0
[2023-03-13T21:54:28.985+0000] {taskinstance.py:2578} INFO - 0 downstream tasks scheduled from follow-on schedule check
[2023-03-14T10:05:16.791+0000] {taskinstance.py:1083} INFO - Dependencies all met for <TaskInstance: AUTOMATISATION.Chargement_des_données_in_ELK scheduled__2023-03-13T00:02:27+00:00 [queued]>
[2023-03-14T10:05:16.802+0000] {taskinstance.py:1083} INFO - Dependencies all met for <TaskInstance: AUTOMATISATION.Chargement_des_données_in_ELK scheduled__2023-03-13T00:02:27+00:00 [queued]>
[2023-03-14T10:05:16.802+0000] {taskinstance.py:1279} INFO - 
--------------------------------------------------------------------------------
[2023-03-14T10:05:16.803+0000] {taskinstance.py:1280} INFO - Starting attempt 1 of 4
[2023-03-14T10:05:16.803+0000] {taskinstance.py:1281} INFO - 
--------------------------------------------------------------------------------
[2023-03-14T10:05:16.822+0000] {taskinstance.py:1300} INFO - Executing <Task(BashOperator): Chargement_des_données_in_ELK> on 2023-03-13 00:02:27+00:00
[2023-03-14T10:05:16.825+0000] {standard_task_runner.py:55} INFO - Started process 36196 to run task
[2023-03-14T10:05:16.829+0000] {standard_task_runner.py:82} INFO - Running: ['airflow', 'tasks', 'run', 'AUTOMATISATION', 'Chargement_des_données_in_ELK', 'scheduled__2023-03-13T00:02:27+00:00', '--job-id', '621', '--raw', '--subdir', 'DAGS_FOLDER/main.py', '--cfg-path', '/tmp/tmpyvj0gxr1']
[2023-03-14T10:05:16.831+0000] {standard_task_runner.py:83} INFO - Job 621: Subtask Chargement_des_données_in_ELK
[2023-03-14T10:05:16.895+0000] {task_command.py:388} INFO - Running <TaskInstance: AUTOMATISATION.Chargement_des_données_in_ELK scheduled__2023-03-13T00:02:27+00:00 [running]> on host dev
[2023-03-14T10:05:16.972+0000] {taskinstance.py:1507} INFO - Exporting the following env vars:
AIRFLOW_CTX_DAG_OWNER=airflow
AIRFLOW_CTX_DAG_ID=AUTOMATISATION
AIRFLOW_CTX_TASK_ID=Chargement_des_données_in_ELK
AIRFLOW_CTX_EXECUTION_DATE=2023-03-13T00:02:27+00:00
AIRFLOW_CTX_TRY_NUMBER=1
AIRFLOW_CTX_DAG_RUN_ID=scheduled__2023-03-13T00:02:27+00:00
[2023-03-14T10:05:16.973+0000] {subprocess.py:63} INFO - Tmp dir root location: 
 /tmp
[2023-03-14T10:05:16.974+0000] {subprocess.py:75} INFO - Running command: ['/usr/bin/bash', '-c', 'echo dev | sudo -S /usr/share/logstash/bin/logstash --path.settings=/etc/logstash/ -f /etc/logstash/conf.d/data.conf']
[2023-03-14T10:05:16.982+0000] {subprocess.py:86} INFO - Output:
[2023-03-14T10:05:17.072+0000] {subprocess.py:93} INFO - [sudo] Mot de passe de dev : Using bundled JDK: /usr/share/logstash/jdk
[2023-03-14T10:05:17.332+0000] {subprocess.py:93} INFO - OpenJDK 64-Bit Server VM warning: Option UseConcMarkSweepGC was deprecated in version 9.0 and will likely be removed in a future release.
[2023-03-14T10:05:39.583+0000] {subprocess.py:93} INFO - Sending Logstash logs to /var/log/logstash which is now configured via log4j2.properties
[2023-03-14T10:05:39.713+0000] {subprocess.py:93} INFO - [2023-03-14T10:05:39,710][INFO ][logstash.runner          ] Log4j configuration path used is: /etc/logstash/log4j2.properties
[2023-03-14T10:05:39.726+0000] {subprocess.py:93} INFO - [2023-03-14T10:05:39,725][INFO ][logstash.runner          ] Starting Logstash {"logstash.version"=>"7.15.2", "jruby.version"=>"jruby 9.2.19.0 (2.5.8) 2021-06-15 55810c552b OpenJDK 64-Bit Server VM 11.0.12+7 on 11.0.12+7 +indy +jit [linux-x86_64]"}
[2023-03-14T10:05:40.297+0000] {subprocess.py:93} INFO - [2023-03-14T10:05:40,297][WARN ][logstash.config.source.multilocal] Ignoring the 'pipelines.yml' file because modules or command line options are specified
[2023-03-14T10:05:41.824+0000] {subprocess.py:93} INFO - [2023-03-14T10:05:41,823][INFO ][logstash.agent           ] Successfully started Logstash API endpoint {:port=>9600}
[2023-03-14T10:05:42.662+0000] {subprocess.py:93} INFO - [2023-03-14T10:05:42,661][INFO ][org.reflections.Reflections] Reflections took 133 ms to scan 1 urls, producing 120 keys and 417 values
[2023-03-14T10:05:44.122+0000] {subprocess.py:93} INFO - [2023-03-14T10:05:44,121][INFO ][logstash.outputs.elasticsearch][main] New Elasticsearch output {:class=>"LogStash::Outputs::ElasticSearch", :hosts=>["//localhost:9200"]}
[2023-03-14T10:05:44.509+0000] {subprocess.py:93} INFO - [2023-03-14T10:05:44,507][INFO ][logstash.outputs.elasticsearch][main] Elasticsearch pool URLs updated {:changes=>{:removed=>[], :added=>[http://localhost:9200/]}}
[2023-03-14T10:05:44.689+0000] {subprocess.py:93} INFO - [2023-03-14T10:05:44,689][WARN ][logstash.outputs.elasticsearch][main] Restored connection to ES instance {:url=>"http://localhost:9200/"}
[2023-03-14T10:05:44.745+0000] {subprocess.py:93} INFO - [2023-03-14T10:05:44,745][INFO ][logstash.outputs.elasticsearch][main] Elasticsearch version determined (7.15.2) {:es_version=>7}
[2023-03-14T10:05:44.749+0000] {subprocess.py:93} INFO - [2023-03-14T10:05:44,749][WARN ][logstash.outputs.elasticsearch][main] Detected a 6.x and above cluster: the `type` event field won't be used to determine the document _type {:es_version=>7}
[2023-03-14T10:05:44.930+0000] {subprocess.py:93} INFO - [2023-03-14T10:05:44,929][INFO ][logstash.outputs.elasticsearch][main] Using a default mapping template {:es_version=>7, :ecs_compatibility=>:disabled}
[2023-03-14T10:05:44.996+0000] {subprocess.py:93} INFO - [2023-03-14T10:05:44,995][INFO ][logstash.javapipeline    ][main] Starting pipeline {:pipeline_id=>"main", "pipeline.workers"=>8, "pipeline.batch.size"=>125, "pipeline.batch.delay"=>50, "pipeline.max_inflight"=>1000, "pipeline.sources"=>["/etc/logstash/conf.d/data.conf"], :thread=>"#<Thread:0x8a283e2 run>"}
[2023-03-14T10:05:46.083+0000] {subprocess.py:93} INFO - [2023-03-14T10:05:46,082][INFO ][logstash.javapipeline    ][main] Pipeline Java execution initialization time {"seconds"=>1.08}
[2023-03-14T10:05:46.230+0000] {subprocess.py:93} INFO - [2023-03-14T10:05:46,229][INFO ][logstash.javapipeline    ][main] Pipeline started {"pipeline.id"=>"main"}
[2023-03-14T10:05:46.331+0000] {subprocess.py:93} INFO - [2023-03-14T10:05:46,330][INFO ][logstash.agent           ] Pipelines running {:count=>1, :running_pipelines=>[:main], :non_running_pipelines=>[]}
[2023-03-14T10:05:47.579+0000] {subprocess.py:93} INFO - [2023-03-14T10:05:47,579][INFO ][logstash.inputs.jdbc     ][main][afa454a497099ce3438919c7cfc7ae10a3b3980082608321cda443e0b5f70dbd] (0.021524s) SELECT CAST(current_setting('server_version_num') AS integer) AS v
[2023-03-14T10:05:47.743+0000] {subprocess.py:93} INFO - [2023-03-14T10:05:47,743][ERROR][logstash.inputs.jdbc     ][main][afa454a497099ce3438919c7cfc7ae10a3b3980082608321cda443e0b5f70dbd] Java::OrgPostgresqlUtil::PSQLException: ERROR: relation "customers" does not exist
[2023-03-14T10:05:47.744+0000] {subprocess.py:93} INFO -   Position : 48: SELECT count(*) AS "count" FROM (SELECT * FROM customers) AS "t1" LIMIT 1
[2023-03-14T10:05:47.770+0000] {subprocess.py:93} INFO - [2023-03-14T10:05:47,769][WARN ][logstash.inputs.jdbc     ][main][afa454a497099ce3438919c7cfc7ae10a3b3980082608321cda443e0b5f70dbd] Exception when executing JDBC query {:exception=>"Java::OrgPostgresqlUtil::PSQLException: ERROR: relation \"customers\" does not exist\n  Position : 48"}
[2023-03-14T10:05:48.841+0000] {subprocess.py:93} INFO - [2023-03-14T10:05:48,840][INFO ][logstash.javapipeline    ][main] Pipeline terminated {"pipeline.id"=>"main"}
[2023-03-14T10:05:48.902+0000] {subprocess.py:93} INFO - [2023-03-14T10:05:48,901][INFO ][logstash.pipelinesregistry] Removed pipeline from registry successfully {:pipeline_id=>:main}
[2023-03-14T10:05:48.957+0000] {subprocess.py:93} INFO - [2023-03-14T10:05:48,957][INFO ][logstash.runner          ] Logstash shut down.
[2023-03-14T10:05:49.079+0000] {subprocess.py:97} INFO - Command exited with return code 0
[2023-03-14T10:05:49.105+0000] {taskinstance.py:1318} INFO - Marking task as SUCCESS. dag_id=AUTOMATISATION, task_id=Chargement_des_données_in_ELK, execution_date=20230313T000227, start_date=20230314T100516, end_date=20230314T100549
[2023-03-14T10:05:49.139+0000] {local_task_job.py:208} INFO - Task exited with return code 0
[2023-03-14T10:05:49.153+0000] {taskinstance.py:2578} INFO - 0 downstream tasks scheduled from follow-on schedule check
[2023-03-15T07:25:28.995+0000] {taskinstance.py:1083} INFO - Dependencies all met for <TaskInstance: AUTOMATISATION.Chargement_des_données_in_ELK scheduled__2023-03-13T00:02:27+00:00 [queued]>
[2023-03-15T07:25:29.017+0000] {taskinstance.py:1083} INFO - Dependencies all met for <TaskInstance: AUTOMATISATION.Chargement_des_données_in_ELK scheduled__2023-03-13T00:02:27+00:00 [queued]>
[2023-03-15T07:25:29.017+0000] {taskinstance.py:1279} INFO - 
--------------------------------------------------------------------------------
[2023-03-15T07:25:29.017+0000] {taskinstance.py:1280} INFO - Starting attempt 1 of 4
[2023-03-15T07:25:29.017+0000] {taskinstance.py:1281} INFO - 
--------------------------------------------------------------------------------
[2023-03-15T07:25:29.030+0000] {taskinstance.py:1300} INFO - Executing <Task(BashOperator): Chargement_des_données_in_ELK> on 2023-03-13 00:02:27+00:00
[2023-03-15T07:25:29.032+0000] {standard_task_runner.py:55} INFO - Started process 126722 to run task
[2023-03-15T07:25:29.034+0000] {standard_task_runner.py:82} INFO - Running: ['airflow', 'tasks', 'run', 'AUTOMATISATION', 'Chargement_des_données_in_ELK', 'scheduled__2023-03-13T00:02:27+00:00', '--job-id', '746', '--raw', '--subdir', 'DAGS_FOLDER/main.py', '--cfg-path', '/tmp/tmpthbqyhsf']
[2023-03-15T07:25:29.034+0000] {standard_task_runner.py:83} INFO - Job 746: Subtask Chargement_des_données_in_ELK
[2023-03-15T07:25:29.069+0000] {task_command.py:388} INFO - Running <TaskInstance: AUTOMATISATION.Chargement_des_données_in_ELK scheduled__2023-03-13T00:02:27+00:00 [running]> on host dev
[2023-03-15T07:25:29.124+0000] {taskinstance.py:1507} INFO - Exporting the following env vars:
AIRFLOW_CTX_DAG_OWNER=airflow
AIRFLOW_CTX_DAG_ID=AUTOMATISATION
AIRFLOW_CTX_TASK_ID=Chargement_des_données_in_ELK
AIRFLOW_CTX_EXECUTION_DATE=2023-03-13T00:02:27+00:00
AIRFLOW_CTX_TRY_NUMBER=1
AIRFLOW_CTX_DAG_RUN_ID=scheduled__2023-03-13T00:02:27+00:00
[2023-03-15T07:25:29.125+0000] {subprocess.py:63} INFO - Tmp dir root location: 
 /tmp
[2023-03-15T07:25:29.126+0000] {subprocess.py:75} INFO - Running command: ['/usr/bin/bash', '-c', 'echo dev | sudo -S /usr/share/logstash/bin/logstash --path.settings=/etc/logstash/ -f /etc/logstash/conf.d/data.conf']
[2023-03-15T07:25:29.132+0000] {subprocess.py:86} INFO - Output:
[2023-03-15T07:25:29.175+0000] {subprocess.py:93} INFO - [sudo] Mot de passe de dev : Using bundled JDK: /usr/share/logstash/jdk
[2023-03-15T07:25:29.305+0000] {subprocess.py:93} INFO - OpenJDK 64-Bit Server VM warning: Option UseConcMarkSweepGC was deprecated in version 9.0 and will likely be removed in a future release.
[2023-03-15T07:25:42.510+0000] {subprocess.py:93} INFO - Sending Logstash logs to /var/log/logstash which is now configured via log4j2.properties
[2023-03-15T07:25:42.566+0000] {subprocess.py:93} INFO - [2023-03-15T07:25:42,565][INFO ][logstash.runner          ] Log4j configuration path used is: /etc/logstash/log4j2.properties
[2023-03-15T07:25:42.572+0000] {subprocess.py:93} INFO - [2023-03-15T07:25:42,571][INFO ][logstash.runner          ] Starting Logstash {"logstash.version"=>"7.15.2", "jruby.version"=>"jruby 9.2.19.0 (2.5.8) 2021-06-15 55810c552b OpenJDK 64-Bit Server VM 11.0.12+7 on 11.0.12+7 +indy +jit [linux-x86_64]"}
[2023-03-15T07:25:42.842+0000] {subprocess.py:93} INFO - [2023-03-15T07:25:42,842][WARN ][logstash.config.source.multilocal] Ignoring the 'pipelines.yml' file because modules or command line options are specified
[2023-03-15T07:25:44.060+0000] {subprocess.py:93} INFO - [2023-03-15T07:25:44,059][INFO ][logstash.agent           ] Successfully started Logstash API endpoint {:port=>9600}
[2023-03-15T07:25:44.491+0000] {subprocess.py:93} INFO - [2023-03-15T07:25:44,491][INFO ][org.reflections.Reflections] Reflections took 63 ms to scan 1 urls, producing 120 keys and 417 values
[2023-03-15T07:25:45.301+0000] {subprocess.py:93} INFO - [2023-03-15T07:25:45,301][INFO ][logstash.outputs.elasticsearch][main] New Elasticsearch output {:class=>"LogStash::Outputs::ElasticSearch", :hosts=>["//localhost:9200"]}
[2023-03-15T07:25:45.521+0000] {subprocess.py:93} INFO - [2023-03-15T07:25:45,520][INFO ][logstash.outputs.elasticsearch][main] Elasticsearch pool URLs updated {:changes=>{:removed=>[], :added=>[http://localhost:9200/]}}
[2023-03-15T07:25:45.616+0000] {subprocess.py:93} INFO - [2023-03-15T07:25:45,615][WARN ][logstash.outputs.elasticsearch][main] Restored connection to ES instance {:url=>"http://localhost:9200/"}
[2023-03-15T07:25:45.649+0000] {subprocess.py:93} INFO - [2023-03-15T07:25:45,649][INFO ][logstash.outputs.elasticsearch][main] Elasticsearch version determined (7.15.2) {:es_version=>7}
[2023-03-15T07:25:45.651+0000] {subprocess.py:93} INFO - [2023-03-15T07:25:45,651][WARN ][logstash.outputs.elasticsearch][main] Detected a 6.x and above cluster: the `type` event field won't be used to determine the document _type {:es_version=>7}
[2023-03-15T07:25:45.755+0000] {subprocess.py:93} INFO - [2023-03-15T07:25:45,754][INFO ][logstash.outputs.elasticsearch][main] Using a default mapping template {:es_version=>7, :ecs_compatibility=>:disabled}
[2023-03-15T07:25:45.792+0000] {subprocess.py:93} INFO - [2023-03-15T07:25:45,791][INFO ][logstash.javapipeline    ][main] Starting pipeline {:pipeline_id=>"main", "pipeline.workers"=>8, "pipeline.batch.size"=>125, "pipeline.batch.delay"=>50, "pipeline.max_inflight"=>1000, "pipeline.sources"=>["/etc/logstash/conf.d/data.conf"], :thread=>"#<Thread:0x38f4a503 run>"}
[2023-03-15T07:25:46.449+0000] {subprocess.py:93} INFO - [2023-03-15T07:25:46,449][INFO ][logstash.javapipeline    ][main] Pipeline Java execution initialization time {"seconds"=>0.65}
[2023-03-15T07:25:46.571+0000] {subprocess.py:93} INFO - [2023-03-15T07:25:46,571][INFO ][logstash.javapipeline    ][main] Pipeline started {"pipeline.id"=>"main"}
[2023-03-15T07:25:46.664+0000] {subprocess.py:93} INFO - [2023-03-15T07:25:46,664][INFO ][logstash.agent           ] Pipelines running {:count=>1, :running_pipelines=>[:main], :non_running_pipelines=>[]}
[2023-03-15T07:25:47.397+0000] {subprocess.py:93} INFO - [2023-03-15T07:25:47,396][INFO ][logstash.inputs.jdbc     ][main][afa454a497099ce3438919c7cfc7ae10a3b3980082608321cda443e0b5f70dbd] (0.012331s) SELECT CAST(current_setting('server_version_num') AS integer) AS v
[2023-03-15T07:25:47.495+0000] {subprocess.py:93} INFO - [2023-03-15T07:25:47,495][INFO ][logstash.inputs.jdbc     ][main][afa454a497099ce3438919c7cfc7ae10a3b3980082608321cda443e0b5f70dbd] (0.010501s) SELECT count(*) AS "count" FROM (SELECT * FROM customers) AS "t1" LIMIT 1
[2023-03-15T07:25:47.679+0000] {subprocess.py:93} INFO - [2023-03-15T07:25:47,679][INFO ][logstash.inputs.jdbc     ][main][afa454a497099ce3438919c7cfc7ae10a3b3980082608321cda443e0b5f70dbd] (0.170730s) SELECT * FROM (SELECT * FROM customers) AS "t1" LIMIT 50000 OFFSET 0
[2023-03-15T07:25:51.784+0000] {subprocess.py:93} INFO - [2023-03-15T07:25:51,784][INFO ][logstash.inputs.jdbc     ][main][afa454a497099ce3438919c7cfc7ae10a3b3980082608321cda443e0b5f70dbd] (0.190300s) SELECT * FROM (SELECT * FROM customers) AS "t1" LIMIT 50000 OFFSET 50000
[2023-03-15T07:25:54.827+0000] {subprocess.py:93} INFO - [2023-03-15T07:25:54,827][INFO ][logstash.inputs.jdbc     ][main][afa454a497099ce3438919c7cfc7ae10a3b3980082608321cda443e0b5f70dbd] (0.192580s) SELECT * FROM (SELECT * FROM customers) AS "t1" LIMIT 50000 OFFSET 100000
[2023-03-15T07:25:57.495+0000] {subprocess.py:93} INFO - [2023-03-15T07:25:57,495][INFO ][logstash.inputs.jdbc     ][main][afa454a497099ce3438919c7cfc7ae10a3b3980082608321cda443e0b5f70dbd] (0.034884s) SELECT * FROM (SELECT * FROM customers) AS "t1" LIMIT 50000 OFFSET 150000
[2023-03-15T07:25:58.721+0000] {subprocess.py:93} INFO - [2023-03-15T07:25:58,721][INFO ][logstash.javapipeline    ][main] Pipeline terminated {"pipeline.id"=>"main"}
[2023-03-15T07:25:58.743+0000] {subprocess.py:93} INFO - [2023-03-15T07:25:58,743][INFO ][logstash.pipelinesregistry] Removed pipeline from registry successfully {:pipeline_id=>:main}
[2023-03-15T07:25:58.763+0000] {subprocess.py:93} INFO - [2023-03-15T07:25:58,763][INFO ][logstash.runner          ] Logstash shut down.
[2023-03-15T07:25:58.835+0000] {subprocess.py:97} INFO - Command exited with return code 0
[2023-03-15T07:25:58.849+0000] {taskinstance.py:1318} INFO - Marking task as SUCCESS. dag_id=AUTOMATISATION, task_id=Chargement_des_données_in_ELK, execution_date=20230313T000227, start_date=20230315T072529, end_date=20230315T072558
[2023-03-15T07:25:58.863+0000] {local_task_job.py:208} INFO - Task exited with return code 0
[2023-03-15T07:25:58.869+0000] {taskinstance.py:2578} INFO - 0 downstream tasks scheduled from follow-on schedule check
